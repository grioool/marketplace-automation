<link rel="icon" type="image/x-icon" href="icons/leftArrow.png">
<p>Назад</p>
<h1 class="userClass">Пользователи</h1>
<button (click)="addUser()" class="button">Добавить пользователя</button>

<table class="table table-striped">
  <thead>
  <tr class="tableTop">
  <td>Id</td>
  <td>Имя</td>
  <td>Email</td>
  <td>Пароль</td>
  <td>WB ключ</td>
  <td>Ozon ключ</td>
  <td>Подписка</td>
  <td>Блок</td>
  </tr>
</thead>
  <tbody class="tableBody">
  <tr *ngFor="let user of users">
    <ng-container *ngIf="isReadOnly(user)">
      <td>{{user._id}}</td>
      <td>{{user.name}}</td>
      <td>{{user.email}}</td>
      <td>{{user.password}}</td>
      <td>{{user.wildBerriesKeys}}</td>
      <td>{{user.ozonKey}}</td>
      <td>{{user.isSubscribed}}</td>
      <td>{{user.isBlocked}}</td>
      <td>
        <input type="button" value="Изменить" class="btn btn-default" (click)="editUser(user)">
      </td>
      <td>
        <input type="button" value="Удалить" (click)="deleteUser(user._id)" class="btn btn-danger">
      </td>
    </ng-container>
    <ng-container *ngIf="isEditable(user)">
      <td>
        <input type="number" [(ngModel)]="editedUser._id" readonly disabled class="form-control">
      </td>
      <td>
        <input type="text" [(ngModel)]="editedUser.name" class="form-control">
      </td>
      <td>
        <input type="text" [(ngModel)]="editedUser.password" class="form-control">
      </td>
      <td>
        <input type="text" [(ngModel)]="editedUser.email" class="form-control">
      </td>
      <td>
        <input type="text" [(ngModel)]="editedUser.wildBerriesKeys" class="form-control">
      </td>
      <td>
        <input type="text" [(ngModel)]="editedUser.ozonKey" class="form-control">
      </td>
      <td>
        <input type="checkbox" [(ngModel)]="editedUser.isBlocked" class="form-control">
      </td>
      <td>
        <input type="checkbox" [(ngModel)]="editedUser.isSubscribed" class="form-control">
      </td>

      <td>
        <input type="button" value="Сохранить" (click)="saveUser()" class="btn btn-success">
      </td>
      <td>
        <input type="button" value="Отмена" (click)="cancel()" class="btn btn-warning">
      </td>
    </ng-container>
    <ng-template [ngTemplateOutlet]="loadTemplate(user)"
                             [ngTemplateOutletContext]="{ $implicit: user}">
    </ng-template>
  </tr>
</tbody>
</table>
<div>{{statusMessage}}</div>

